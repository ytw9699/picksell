<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="member"> 
	<!-- 일반 회원가입 -->
	<insert id="insertMember" parameterType="hashmap">
		insert into PS_MEMBER(id,
							password,
							name,
							email,
							address,
							kind,
							account,
							account_name,
							bank,
							regdate) values(#{id},
									#{password},
									#{name},
									#{email},
									#{address},
									#{kind},
									#{account},
									#{account_name},
									#{bank},
									sysdate )
	</insert>
	
	<!-- 사업자 회원가입 -->
	<insert id="insertBsMember" parameterType="hashmap">
		insert into PS_MEMBER(id,
							password,
							name,
							email,
							address,
							kind,
							account,
							account_name,
							bank,
							regdate,
							business_number,
							business_name
							) values(#{id},
									#{password},
									#{name},
									#{email},
									#{address},
									#{kind},
									#{account},
									#{account_name},
									#{bank},
									sysdate,
									#{business_number},
									#{business_name}
									)
	</insert>
	
	<select id="userCheck" parameterType="hashmap" resultType="hashmap">
			SELECT * FROM PS_MEMBER WHERE ID = #{ID}
	</select>
	
	<update id="userAlarmChange" parameterType="hashmap">
		update ps_member set alarm_consent = 
		<choose>
			<when test="currentAlarm == 'ON'">'OFF'</when>
			<when test="currentAlarm == 'OFF'">'ON'</when>
		</choose>
		 where id = #{sessionId}
	</update>
	
	<update id="insertDate" parameterType="hashmap">
	  	update ps_member set latestLogin1 = sysdate where id = #{ID}
	</update>
	
	
	<update id="changeDate" parameterType="hashmap">
	  	update ps_member set latestLogin2 = #{LATESTLOGIN1} where id = #{ID}
	</update>
	
</mapper>