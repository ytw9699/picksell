<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="main"> 
	
	<select id="nomalProduct"  resultType="hashmap">
			select * from ps_product where  howtosell != '2' order by product_regdate desc
			<!-- select * from ps_product where howtosell = 0 or howtosell = 1  -->
	</select>
	
	<!-- 새로등록된 플러스 상품 plusProductList-->
	<select id="pulsProduct"  resultType="hashmap">
			select * from ps_product where howtosell = '2' order by product_regdate desc
	</select>
	
	<select id="hotCategory"  resultType="hashmap">
			<![CDATA[
		select r, b.total, b.category_num, c.category_name from(

		select rownum r, a.total, a.category_num from(
		
		select count(*) as total, category_num from ps_product group by category_num order by count(*) desc
	
	      )a order by a.total desc )b, ps_category c where b.category_num = c.category_num and r < 7
	         ]]>
	      
	</select>
	 <!-- 플러스 인기 상품 판매수 만큼 순위로 뽑음 --> 
	 <select id="hotProduct" resultType="hashmap">
      <![CDATA[
      select r, b.total, b.product_num, c.content, c.first_img, c.subject 
      from(
      select rownum r, a.total, a.product_num from(
      select count(*) as total, product_num
      from ps_orderlist
      group by product_num
      order by count(*) desc
      )a order by a.total desc )b, ps_product c where b.product_num = c.product_num and c.howtosell ='2'
     ]]>
   </select>
   
   <!-- 통합 검색 로직 -->
   <select id="mainSearchList" resultType="hashmap" parameterType="String">
	select * from ps_product where subject like '%'||#{searchKeyword}||'%' order by product_regdate desc
	<!-- select * from ps_product where subject like #{searchKeyword} order by product_regdate desc			 -->							
   
	</select>
	
</mapper>